(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{6060:function(e,r,s){Promise.resolve().then(s.bind(s,9847))},9847:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return n}});var t=s(7573),a=s(7653);function n(){let[e,r]=(0,a.useState)(null),[s,n]=(0,a.useState)(!0),[i,c]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=new URLSearchParams(window.location.search).get("shop");if(!e){c("No shop parameter found. Please connect your store first."),n(!1);return}l(e)},[]);let l=async e=>{try{let s=await fetch("https://profitpeek-dashboard.onrender.com/api/dashboard?shop=".concat(e)),t=await s.json();s.ok?r(t):c(t.error||"Failed to fetch dashboard data")}catch(e){c("Network error. Please try again.")}finally{n(!1)}},d=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),o=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return s?(0,t.jsx)("div",{className:"container",style:{paddingTop:"2rem"},children:(0,t.jsx)("div",{className:"loading",children:"Loading dashboard..."})}):i?(0,t.jsxs)("div",{className:"container",style:{paddingTop:"2rem"},children:[(0,t.jsx)("div",{className:"error",children:i}),(0,t.jsx)("a",{href:"/",className:"btn",children:"Back to Home"})]}):e?(0,t.jsxs)("div",{className:"container",style:{paddingTop:"2rem",paddingBottom:"2rem"},children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{style:{fontSize:"2.5rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"ProfitPeek Dashboard"}),(0,t.jsx)("p",{style:{color:"#6b7280"},children:e.shop})]}),(0,t.jsx)("a",{href:"/",className:"btn btn-secondary",children:"Back to Home"})]}),(0,t.jsxs)("div",{className:"grid grid-4",style:{marginBottom:"2rem"},children:[(0,t.jsxs)("div",{className:"card metric",children:[(0,t.jsx)("div",{className:"metric-value",children:d(e.metrics.total_revenue)}),(0,t.jsx)("div",{className:"metric-label",children:"Total Revenue"})]}),(0,t.jsxs)("div",{className:"card metric",children:[(0,t.jsx)("div",{className:"metric-value",children:e.metrics.total_orders}),(0,t.jsx)("div",{className:"metric-label",children:"Total Orders"})]}),(0,t.jsxs)("div",{className:"card metric",children:[(0,t.jsx)("div",{className:"metric-value",children:d(e.metrics.average_order_value)}),(0,t.jsx)("div",{className:"metric-label",children:"Average Order Value"})]}),(0,t.jsxs)("div",{className:"card metric",children:[(0,t.jsx)("div",{className:"metric-value",children:Object.keys(e.metrics.orders_by_status).length}),(0,t.jsx)("div",{className:"metric-label",children:"Order Statuses"})]})]}),(0,t.jsxs)("div",{className:"card",style:{marginBottom:"2rem"},children:[(0,t.jsx)("h3",{style:{marginBottom:"1rem"},children:"Orders by Status"}),(0,t.jsx)("div",{className:"grid grid-2",children:Object.entries(e.metrics.orders_by_status).map(e=>{let[r,s]=e;return(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.5rem 0"},children:[(0,t.jsx)("span",{className:"status status-".concat(r.toLowerCase()),children:r.charAt(0).toUpperCase()+r.slice(1)}),(0,t.jsx)("span",{style:{fontWeight:"600"},children:s})]},r)})})]}),(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("h3",{style:{marginBottom:"1rem"},children:"Recent Orders"}),e.recent_orders.length>0?(0,t.jsx)("div",{className:"table-container",style:{overflowX:"auto"},children:(0,t.jsxs)("table",{className:"table",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Order"}),(0,t.jsx)("th",{children:"Date"}),(0,t.jsx)("th",{children:"Amount"}),(0,t.jsx)("th",{children:"Status"})]})}),(0,t.jsx)("tbody",{children:e.recent_orders.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{style:{fontWeight:"600"},children:e.name}),(0,t.jsx)("td",{children:o(e.created_at)}),(0,t.jsx)("td",{children:d(e.total_price)}),(0,t.jsx)("td",{children:(0,t.jsx)("span",{className:"status status-".concat(e.financial_status.toLowerCase()),children:e.financial_status.charAt(0).toUpperCase()+e.financial_status.slice(1)})})]},e.id))})]})}):(0,t.jsx)("p",{style:{color:"#6b7280",textAlign:"center",padding:"2rem"},children:"No recent orders found"})]}),(0,t.jsxs)("div",{style:{textAlign:"center",marginTop:"2rem",color:"#6b7280",fontSize:"0.875rem"},children:["Last updated: ",o(e.last_updated)]})]}):(0,t.jsxs)("div",{className:"container",style:{paddingTop:"2rem"},children:[(0,t.jsx)("div",{className:"error",children:"No data available"}),(0,t.jsx)("a",{href:"/",className:"btn",children:"Back to Home"})]})}},8294:function(e,r,s){"use strict";var t=s(7653),a=Symbol.for("react.element"),n=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,r,s){var t,l={},d=null,o=null;for(t in void 0!==s&&(d=""+s),void 0!==r.key&&(d=""+r.key),void 0!==r.ref&&(o=r.ref),r)n.call(r,t)&&!c.hasOwnProperty(t)&&(l[t]=r[t]);if(e&&e.defaultProps)for(t in r=e.defaultProps)void 0===l[t]&&(l[t]=r[t]);return{$$typeof:a,type:e,key:d,ref:o,props:l,_owner:i.current}}r.jsx=l,r.jsxs=l},7573:function(e,r,s){"use strict";e.exports=s(8294)}},function(e){e.O(0,[293,16,744],function(){return e(e.s=6060)}),_N_E=e.O()}]);