(()=>{var e={};e.id=702,e.ids=[702],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7955:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>h,tree:()=>o});var a=s(9441),r=s(1498),l=s(6580),i=s.n(l),d=s(5511),n={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>d[e]);s.d(t,n);let o=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,2548)),"/Users/mattlady/profitpeek-dashboard/apps/web/src/app/dashboard/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,8205)),"/Users/mattlady/profitpeek-dashboard/apps/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,3250,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/mattlady/profitpeek-dashboard/apps/web/src/app/dashboard/page.tsx"],x="/dashboard/page",m={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},8198:(e,t,s)=>{Promise.resolve().then(s.bind(s,1624))},9972:()=>{},4276:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,9489,23)),Promise.resolve().then(s.t.bind(s,6225,23)),Promise.resolve().then(s.t.bind(s,5964,23)),Promise.resolve().then(s.t.bind(s,5804,23)),Promise.resolve().then(s.t.bind(s,7255,23)),Promise.resolve().then(s.t.bind(s,1021,23))},1624:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var a=s(7685),r=s(3810);function l(){let[e,t]=(0,r.useState)(null),[s,l]=(0,r.useState)(null),[i,d]=(0,r.useState)(!0),[n,o]=(0,r.useState)(null),c="profitpeekteststore.myshopify.com",x="https://profitpeek-dashboard.onrender.com";return((0,r.useEffect)(()=>{(async()=>{try{d(!0);let e=await fetch(`${x}/api/dashboard?shop=${c}`);if(!e.ok)throw Error("Failed to fetch dashboard data");let s=await e.json();t(s);let a=await fetch(`${x}/api/profit-analysis?shop=${c}`);if(!a.ok)throw Error("Failed to fetch profit data");let r=await a.json();l(r)}catch(e){o(e instanceof Error?e.message:"An error occurred")}finally{d(!1)}})()},[]),i)?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading ProfitPeek Dashboard..."})]})}):n?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"text-red-600 text-6xl mb-4",children:"⚠️"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error Loading Dashboard"}),a.jsx("p",{className:"text-gray-600 mb-4",children:n}),a.jsx("p",{className:"text-sm text-gray-500",children:"Make sure you've completed OAuth authentication first."}),a.jsx("a",{href:`${x}/auth/start?shop=${c}`,className:"inline-block mt-4 bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700",children:"Authenticate with Shopify"})]})}):a.jsx("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"ProfitPeek Dashboard"}),(0,a.jsxs)("p",{className:"text-gray-600",children:["Real-time profit tracking for ",e?.shop]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Last updated: ",e?.last_updated]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Total Revenue"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-green-600",children:["$",e?.metrics.total_revenue.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Total Orders"}),a.jsx("p",{className:"text-3xl font-bold text-blue-600",children:e?.metrics.total_orders})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Average Order Value"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-purple-600",children:["$",e?.metrics.average_order_value.toFixed(2)]})]})]}),s&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Profit Analysis"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Net Profit"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-green-600",children:["$",s.overall_metrics.total_net_profit.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Profit Margin"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-blue-600",children:[s.overall_metrics.overall_margin.toFixed(1),"%"]})]}),(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"COGS"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-orange-600",children:["$",s.overall_metrics.total_cogs.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Processing Fees"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-red-600",children:["$",s.overall_metrics.total_fees.toLocaleString()]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Orders by Status"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:e?.metrics.orders_by_status&&Object.entries(e.metrics.orders_by_status).map(([e,t])=>(0,a.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 capitalize",children:e}),a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:t})]},e))})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Recent Orders"}),a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e?.recent_orders.map(e=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[e.customer?.first_name," ",e.customer?.last_name]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",parseFloat(e.total_price).toFixed(2)]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${"paid"===e.financial_status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:e.financial_status})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString()})]},e.id))})]})})]}),(0,a.jsxs)("div",{className:"mt-8 text-center",children:[a.jsx("a",{href:"/",className:"inline-block bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700 mr-4",children:"← Back to Home"}),a.jsx("a",{href:"/profit-analysis",className:"inline-block bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700",children:"View Detailed Profit Analysis →"})]})]})})}},7685:(e,t,s)=>{"use strict";e.exports=s(943).vendored["react-ssr"].ReactJsxRuntime},2548:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>r,default:()=>i});let a=(0,s(599).createProxy)(String.raw`/Users/mattlady/profitpeek-dashboard/apps/web/src/app/dashboard/page.tsx`),{__esModule:r,$$typeof:l}=a,i=a.default},8205:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l,metadata:()=>r});var a=s(6491);s(5556);let r={title:"ProfitPeek - Real-Time Profit Dashboard",description:"Real-time profit dashboard for Shopify merchants"};function l({children:e}){return a.jsx("html",{lang:"en",children:a.jsx("body",{children:e})})}},5556:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[99],()=>s(7955));module.exports=a})();